<script type="text/javascript">
function save(id) {
    fetch('/admin/save-status', {
        method: "POST",
        body: JSON.stringify({id: document.getElementById('id' + id).value, status: document.getElementById('status' + id).value}),
        headers: {"Content-Type":"application/json"}
    })}
    
</script> 

<h1>View reported issues</h1>
<br>
{{> admin-navigation}}
<br>
<div class="maincontent">
    <div class="blogs">
    <h2>Issues</h2>
    {{#if issues.length}}
        <ul>
            {{#each issues}}
                <li>
                    <h3>{{this.email}}</h3>
                    <input type="hidden" id="id{{@index}}" value={{this.id}}>
                    <label for="status">Status:</label>
                        <select name="status" id="status{{@index}}" onchange="save({{@index}})">
                            <option value="New" {{#if (eq this.status "New")}}selected{{/if}}>New</option>
                            <option value="In progress" {{#if (eq this.status "In progress")}}selected{{/if}}>In progress</option>
                            <option value="Done" {{#if (eq this.status "Done")}}selected{{/if}}>Done</option>
                        </select>
                    <p>{{this.subject}}</p>
                    <p>{{this.date}}</p>
                   <p>{{{this.contentReplace}}}</p>
                </li>
            {{/each}}
        </ul>
    {{else}}
        <p>No issues available at the moment.</p>
    {{/if}}
</div>
</div>